2019-09-14 11:42:35.928 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:42:36.173 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0
2019-09-14 11:42:36.554 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:42:36.587 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0
2019-09-14 11:42:36.855 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Clients] AS [c])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2019-09-14 11:42:36.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [IdentityResources] AS [i])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2019-09-14 11:42:36.885 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ApiResources] AS [a])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2019-09-14 11:42:36.963 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'AthylpsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-09-14 11:42:36.987 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0
2019-09-14 11:42:37.085 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2019-09-14 11:42:37.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2019-09-14 11:42:37.246 +03:00 [INF] User profile is available. Using 'C:\Users\Kartish\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-09-14 11:42:39.506 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2019-09-14 11:42:43.486 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2019-09-14 11:42:43.573 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2019-09-14 11:42:43.723 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2019-09-14 11:42:47.568 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2019-09-14 11:42:48.922 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2019-09-14 11:42:49.002 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2019-09-14 11:42:49.032 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserClaims] ([ClaimType], [ClaimValue], [UserId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetUserClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2019-09-14 11:42:49.047 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p14='?' (DbType = Int64), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p15='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [SecurityStamp] = @p11, [TwoFactorEnabled] = @p12, [UserName] = @p13
WHERE [Id] = @p14 AND [ConcurrencyStamp] = @p15;
SELECT @@ROWCOUNT;
2019-09-14 11:42:53.833 +03:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-14 11:42:53.861 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-14 11:42:53.863 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-14 11:42:53.865 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-14 11:42:53.866 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-14 11:42:53.868 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-14 11:42:53.869 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-14 11:42:54.075 +03:00 [DBG] Starting grant removal
2019-09-14 11:47:13.664 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5001/connect/token application/x-www-form-urlencoded 156
2019-09-14 11:47:13.704 +03:00 [DBG] Login Url: /Account/Login
2019-09-14 11:47:13.707 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-14 11:47:13.709 +03:00 [DBG] Logout Url: /Account/Logout
2019-09-14 11:47:13.711 +03:00 [DBG] ConsentUrl Url: /consent
2019-09-14 11:47:13.712 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-14 11:47:13.714 +03:00 [DBG] Error Url: /home/error
2019-09-14 11:47:13.716 +03:00 [DBG] Error Id Parameter: errorId
2019-09-14 11:47:13.759 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-09-14 11:47:13.786 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-09-14 11:47:13.789 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-09-14 11:47:13.797 +03:00 [DBG] Start token request.
2019-09-14 11:47:13.804 +03:00 [DBG] Start client validation
2019-09-14 11:47:13.813 +03:00 [DBG] Start parsing Basic Authentication secret
2019-09-14 11:47:13.819 +03:00 [DBG] Start parsing for secret in post body
2019-09-14 11:47:13.846 +03:00 [DBG] Parser found secret: PostBodySecretParser
2019-09-14 11:47:13.848 +03:00 [DBG] Secret id found: ro.client
2019-09-14 11:47:13.871 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:47:14.087 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Created], [x].[Description], [x].[DeviceCodeLifetime], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LastAccessed], [x].[LogoUri], [x].[NonEditable], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh], [x].[Updated], [x].[UserCodeType], [x].[UserSsoLifetime]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id]
2019-09-14 11:47:14.136 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
INNER JOIN (
    SELECT TOP(1) [x0].[Id]
    FROM [Clients] AS [x0]
    WHERE [x0].[ClientId] = @__clientId_0
    ORDER BY [x0].[Id]
) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:47:14.153 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
FROM [ClientRedirectUris] AS [x.RedirectUris]
INNER JOIN (
    SELECT TOP(1) [x1].[Id]
    FROM [Clients] AS [x1]
    WHERE [x1].[ClientId] = @__clientId_0
    ORDER BY [x1].[Id]
) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
ORDER BY [t0].[Id]
2019-09-14 11:47:14.165 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
INNER JOIN (
    SELECT TOP(1) [x2].[Id]
    FROM [Clients] AS [x2]
    WHERE [x2].[ClientId] = @__clientId_0
    ORDER BY [x2].[Id]
) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
ORDER BY [t1].[Id]
2019-09-14 11:47:14.172 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
FROM [ClientScopes] AS [x.AllowedScopes]
INNER JOIN (
    SELECT TOP(1) [x3].[Id]
    FROM [Clients] AS [x3]
    WHERE [x3].[ClientId] = @__clientId_0
    ORDER BY [x3].[Id]
) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
ORDER BY [t2].[Id]
2019-09-14 11:47:14.183 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Created], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
FROM [ClientSecrets] AS [x.ClientSecrets]
INNER JOIN (
    SELECT TOP(1) [x4].[Id]
    FROM [Clients] AS [x4]
    WHERE [x4].[ClientId] = @__clientId_0
    ORDER BY [x4].[Id]
) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:47:14.193 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
FROM [ClientClaims] AS [x.Claims]
INNER JOIN (
    SELECT TOP(1) [x5].[Id]
    FROM [Clients] AS [x5]
    WHERE [x5].[ClientId] = @__clientId_0
    ORDER BY [x5].[Id]
) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:47:14.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
INNER JOIN (
    SELECT TOP(1) [x6].[Id]
    FROM [Clients] AS [x6]
    WHERE [x6].[ClientId] = @__clientId_0
    ORDER BY [x6].[Id]
) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
ORDER BY [t5].[Id]
2019-09-14 11:47:14.209 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
INNER JOIN (
    SELECT TOP(1) [x7].[Id]
    FROM [Clients] AS [x7]
    WHERE [x7].[ClientId] = @__clientId_0
    ORDER BY [x7].[Id]
) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
ORDER BY [t6].[Id]
2019-09-14 11:47:14.217 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
FROM [ClientProperties] AS [x.Properties]
INNER JOIN (
    SELECT TOP(1) [x8].[Id]
    FROM [Clients] AS [x8]
    WHERE [x8].[ClientId] = @__clientId_0
    ORDER BY [x8].[Id]
) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
ORDER BY [t7].[Id]
2019-09-14 11:47:14.581 +03:00 [DBG] ro.client found in database: true
2019-09-14 11:47:14.589 +03:00 [DBG] client configuration validation for client ro.client succeeded.
2019-09-14 11:47:14.602 +03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-09-14 11:47:14.603 +03:00 [DBG] Client validation success
2019-09-14 11:47:14.627 +03:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLPOU0HOKA6R:00000001","TimeStamp":"2019-09-14T08:47:14.0000000Z","ProcessId":16360,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-09-14 11:47:14.655 +03:00 [DBG] Start token request validation
2019-09-14 11:47:14.669 +03:00 [DBG] Start resource owner password token request validation
2019-09-14 11:47:14.715 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Created], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[NonEditable], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument], [identityResource].[Updated]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'userapi')
ORDER BY [identityResource].[Id]
2019-09-14 11:47:14.723 +03:00 [DBG] Found [] identity scopes in database
2019-09-14 11:47:14.802 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api].[Id], [api].[Created], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[LastAccessed], [api].[Name], [api].[NonEditable], [api].[Updated]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'userapi') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id]
2019-09-14 11:47:14.820 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Secrets].[Id], [api.Secrets].[ApiResourceId], [api.Secrets].[Created], [api.Secrets].[Description], [api.Secrets].[Expiration], [api.Secrets].[Type], [api.Secrets].[Value]
FROM [ApiSecrets] AS [api.Secrets]
INNER JOIN (
    SELECT [api0].[Id]
    FROM [ApiResources] AS [api0]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x0]
        WHERE [x0].[Name] IN (N'userapi') AND ([api0].[Id] = [x0].[ApiResourceId]))
) AS [t] ON [api.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:47:14.829 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Scopes].[Id], [api.Scopes].[ApiResourceId], [api.Scopes].[Description], [api.Scopes].[DisplayName], [api.Scopes].[Emphasize], [api.Scopes].[Name], [api.Scopes].[Required], [api.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [api.Scopes]
INNER JOIN (
    SELECT [api1].[Id]
    FROM [ApiResources] AS [api1]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x1]
        WHERE [x1].[Name] IN (N'userapi') AND ([api1].[Id] = [x1].[ApiResourceId]))
) AS [t0] ON [api.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [api.Scopes].[Id]
2019-09-14 11:47:14.846 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Scopes.UserClaims].[Id], [api.Scopes.UserClaims].[ApiScopeId], [api.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [api.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [api.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [api.Scopes0]
    INNER JOIN (
        SELECT [api2].[Id]
        FROM [ApiResources] AS [api2]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x2]
            WHERE [x2].[Name] IN (N'userapi') AND ([api2].[Id] = [x2].[ApiResourceId]))
    ) AS [t1] ON [api.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [api.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:47:14.856 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.UserClaims].[Id], [api.UserClaims].[ApiResourceId], [api.UserClaims].[Type]
FROM [ApiClaims] AS [api.UserClaims]
INNER JOIN (
    SELECT [api3].[Id]
    FROM [ApiResources] AS [api3]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x3]
        WHERE [x3].[Name] IN (N'userapi') AND ([api3].[Id] = [x3].[ApiResourceId]))
) AS [t3] ON [api.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:47:14.867 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Properties].[Id], [api.Properties].[ApiResourceId], [api.Properties].[Key], [api.Properties].[Value]
FROM [ApiProperties] AS [api.Properties]
INNER JOIN (
    SELECT [api4].[Id]
    FROM [ApiResources] AS [api4]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x4]
        WHERE [x4].[Name] IN (N'userapi') AND ([api4].[Id] = [x4].[ApiResourceId]))
) AS [t4] ON [api.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:47:14.932 +03:00 [DBG] Found ["userapi"] API scopes in database
2019-09-14 11:47:14.950 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Created], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[NonEditable], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument], [identityResource].[Updated]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'userapi')
ORDER BY [identityResource].[Id]
2019-09-14 11:47:14.955 +03:00 [DBG] Found [] identity scopes in database
2019-09-14 11:47:14.960 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api].[Id], [api].[Created], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[LastAccessed], [api].[Name], [api].[NonEditable], [api].[Updated]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'userapi') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id]
2019-09-14 11:47:14.968 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Secrets].[Id], [api.Secrets].[ApiResourceId], [api.Secrets].[Created], [api.Secrets].[Description], [api.Secrets].[Expiration], [api.Secrets].[Type], [api.Secrets].[Value]
FROM [ApiSecrets] AS [api.Secrets]
INNER JOIN (
    SELECT [api0].[Id]
    FROM [ApiResources] AS [api0]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x0]
        WHERE [x0].[Name] IN (N'userapi') AND ([api0].[Id] = [x0].[ApiResourceId]))
) AS [t] ON [api.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:47:14.979 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Scopes].[Id], [api.Scopes].[ApiResourceId], [api.Scopes].[Description], [api.Scopes].[DisplayName], [api.Scopes].[Emphasize], [api.Scopes].[Name], [api.Scopes].[Required], [api.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [api.Scopes]
INNER JOIN (
    SELECT [api1].[Id]
    FROM [ApiResources] AS [api1]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x1]
        WHERE [x1].[Name] IN (N'userapi') AND ([api1].[Id] = [x1].[ApiResourceId]))
) AS [t0] ON [api.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [api.Scopes].[Id]
2019-09-14 11:47:14.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Scopes.UserClaims].[Id], [api.Scopes.UserClaims].[ApiScopeId], [api.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [api.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [api.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [api.Scopes0]
    INNER JOIN (
        SELECT [api2].[Id]
        FROM [ApiResources] AS [api2]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x2]
            WHERE [x2].[Name] IN (N'userapi') AND ([api2].[Id] = [x2].[ApiResourceId]))
    ) AS [t1] ON [api.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [api.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:47:14.996 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.UserClaims].[Id], [api.UserClaims].[ApiResourceId], [api.UserClaims].[Type]
FROM [ApiClaims] AS [api.UserClaims]
INNER JOIN (
    SELECT [api3].[Id]
    FROM [ApiResources] AS [api3]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x3]
        WHERE [x3].[Name] IN (N'userapi') AND ([api3].[Id] = [x3].[ApiResourceId]))
) AS [t3] ON [api.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:47:15.007 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Properties].[Id], [api.Properties].[ApiResourceId], [api.Properties].[Key], [api.Properties].[Value]
FROM [ApiProperties] AS [api.Properties]
INNER JOIN (
    SELECT [api4].[Id]
    FROM [ApiResources] AS [api4]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x4]
        WHERE [x4].[Name] IN (N'userapi') AND ([api4].[Id] = [x4].[ApiResourceId]))
) AS [t4] ON [api.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:47:15.014 +03:00 [DBG] Found ["userapi"] API scopes in database
2019-09-14 11:47:15.027 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'AthylpsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-09-14 11:47:15.034 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2019-09-14 11:47:15.043 +03:00 [INF] No user found matching username: username
2019-09-14 11:47:15.046 +03:00 [INF] {"Username":"username","Endpoint":"Token","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid username","ActivityId":"0HLPOU0HOKA6R:00000001","TimeStamp":"2019-09-14T08:47:15.0000000Z","ProcessId":16360,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-09-14 11:47:15.064 +03:00 [INF] User authentication failed: invalid_username_or_password
2019-09-14 11:47:15.065 +03:00 [INF] {"Username":"username","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLPOU0HOKA6R:00000001","TimeStamp":"2019-09-14T08:47:15.0000000Z","ProcessId":16360,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-09-14 11:47:15.084 +03:00 [INF] {"ClientId":"ro.client","ClientName":"ResourceOwner Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"userapi","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLPOU0HOKA6R:00000001","TimeStamp":"2019-09-14T08:47:15.0000000Z","ProcessId":16360,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-09-14 11:47:15.141 +03:00 [INF] Request finished in 1477.7295ms 400 application/json; charset=UTF-8
2019-09-14 11:47:57.022 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5001/connect/token application/x-www-form-urlencoded 157
2019-09-14 11:47:57.026 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-09-14 11:47:57.028 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-09-14 11:47:57.031 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-09-14 11:47:57.034 +03:00 [DBG] Start token request.
2019-09-14 11:47:57.036 +03:00 [DBG] Start client validation
2019-09-14 11:47:57.040 +03:00 [DBG] Start parsing Basic Authentication secret
2019-09-14 11:47:57.043 +03:00 [DBG] Start parsing for secret in post body
2019-09-14 11:47:57.045 +03:00 [DBG] Parser found secret: PostBodySecretParser
2019-09-14 11:47:57.047 +03:00 [DBG] Secret id found: ro.client
2019-09-14 11:47:57.049 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:47:57.058 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Created], [x].[Description], [x].[DeviceCodeLifetime], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LastAccessed], [x].[LogoUri], [x].[NonEditable], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh], [x].[Updated], [x].[UserCodeType], [x].[UserSsoLifetime]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id]
2019-09-14 11:47:57.069 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
INNER JOIN (
    SELECT TOP(1) [x0].[Id]
    FROM [Clients] AS [x0]
    WHERE [x0].[ClientId] = @__clientId_0
    ORDER BY [x0].[Id]
) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:47:57.079 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
FROM [ClientRedirectUris] AS [x.RedirectUris]
INNER JOIN (
    SELECT TOP(1) [x1].[Id]
    FROM [Clients] AS [x1]
    WHERE [x1].[ClientId] = @__clientId_0
    ORDER BY [x1].[Id]
) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
ORDER BY [t0].[Id]
2019-09-14 11:47:57.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
INNER JOIN (
    SELECT TOP(1) [x2].[Id]
    FROM [Clients] AS [x2]
    WHERE [x2].[ClientId] = @__clientId_0
    ORDER BY [x2].[Id]
) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
ORDER BY [t1].[Id]
2019-09-14 11:47:57.099 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
FROM [ClientScopes] AS [x.AllowedScopes]
INNER JOIN (
    SELECT TOP(1) [x3].[Id]
    FROM [Clients] AS [x3]
    WHERE [x3].[ClientId] = @__clientId_0
    ORDER BY [x3].[Id]
) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
ORDER BY [t2].[Id]
2019-09-14 11:47:57.108 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Created], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
FROM [ClientSecrets] AS [x.ClientSecrets]
INNER JOIN (
    SELECT TOP(1) [x4].[Id]
    FROM [Clients] AS [x4]
    WHERE [x4].[ClientId] = @__clientId_0
    ORDER BY [x4].[Id]
) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:47:57.114 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
FROM [ClientClaims] AS [x.Claims]
INNER JOIN (
    SELECT TOP(1) [x5].[Id]
    FROM [Clients] AS [x5]
    WHERE [x5].[ClientId] = @__clientId_0
    ORDER BY [x5].[Id]
) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:47:57.120 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
INNER JOIN (
    SELECT TOP(1) [x6].[Id]
    FROM [Clients] AS [x6]
    WHERE [x6].[ClientId] = @__clientId_0
    ORDER BY [x6].[Id]
) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
ORDER BY [t5].[Id]
2019-09-14 11:47:57.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
INNER JOIN (
    SELECT TOP(1) [x7].[Id]
    FROM [Clients] AS [x7]
    WHERE [x7].[ClientId] = @__clientId_0
    ORDER BY [x7].[Id]
) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
ORDER BY [t6].[Id]
2019-09-14 11:47:57.135 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
FROM [ClientProperties] AS [x.Properties]
INNER JOIN (
    SELECT TOP(1) [x8].[Id]
    FROM [Clients] AS [x8]
    WHERE [x8].[ClientId] = @__clientId_0
    ORDER BY [x8].[Id]
) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
ORDER BY [t7].[Id]
2019-09-14 11:47:57.143 +03:00 [DBG] ro.client found in database: true
2019-09-14 11:47:57.146 +03:00 [DBG] client configuration validation for client ro.client succeeded.
2019-09-14 11:47:57.147 +03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-09-14 11:47:57.149 +03:00 [DBG] Client validation success
2019-09-14 11:47:57.150 +03:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLPOU0HOKA6R:00000002","TimeStamp":"2019-09-14T08:47:57.0000000Z","ProcessId":16360,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-09-14 11:47:57.164 +03:00 [DBG] Start token request validation
2019-09-14 11:47:57.165 +03:00 [DBG] Start resource owner password token request validation
2019-09-14 11:47:57.168 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Created], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[NonEditable], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument], [identityResource].[Updated]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'userapi')
ORDER BY [identityResource].[Id]
2019-09-14 11:47:57.175 +03:00 [DBG] Found [] identity scopes in database
2019-09-14 11:47:57.179 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api].[Id], [api].[Created], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[LastAccessed], [api].[Name], [api].[NonEditable], [api].[Updated]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'userapi') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id]
2019-09-14 11:47:57.185 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Secrets].[Id], [api.Secrets].[ApiResourceId], [api.Secrets].[Created], [api.Secrets].[Description], [api.Secrets].[Expiration], [api.Secrets].[Type], [api.Secrets].[Value]
FROM [ApiSecrets] AS [api.Secrets]
INNER JOIN (
    SELECT [api0].[Id]
    FROM [ApiResources] AS [api0]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x0]
        WHERE [x0].[Name] IN (N'userapi') AND ([api0].[Id] = [x0].[ApiResourceId]))
) AS [t] ON [api.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:47:57.194 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Scopes].[Id], [api.Scopes].[ApiResourceId], [api.Scopes].[Description], [api.Scopes].[DisplayName], [api.Scopes].[Emphasize], [api.Scopes].[Name], [api.Scopes].[Required], [api.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [api.Scopes]
INNER JOIN (
    SELECT [api1].[Id]
    FROM [ApiResources] AS [api1]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x1]
        WHERE [x1].[Name] IN (N'userapi') AND ([api1].[Id] = [x1].[ApiResourceId]))
) AS [t0] ON [api.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [api.Scopes].[Id]
2019-09-14 11:47:57.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Scopes.UserClaims].[Id], [api.Scopes.UserClaims].[ApiScopeId], [api.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [api.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [api.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [api.Scopes0]
    INNER JOIN (
        SELECT [api2].[Id]
        FROM [ApiResources] AS [api2]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x2]
            WHERE [x2].[Name] IN (N'userapi') AND ([api2].[Id] = [x2].[ApiResourceId]))
    ) AS [t1] ON [api.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [api.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:47:57.208 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.UserClaims].[Id], [api.UserClaims].[ApiResourceId], [api.UserClaims].[Type]
FROM [ApiClaims] AS [api.UserClaims]
INNER JOIN (
    SELECT [api3].[Id]
    FROM [ApiResources] AS [api3]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x3]
        WHERE [x3].[Name] IN (N'userapi') AND ([api3].[Id] = [x3].[ApiResourceId]))
) AS [t3] ON [api.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:47:57.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Properties].[Id], [api.Properties].[ApiResourceId], [api.Properties].[Key], [api.Properties].[Value]
FROM [ApiProperties] AS [api.Properties]
INNER JOIN (
    SELECT [api4].[Id]
    FROM [ApiResources] AS [api4]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x4]
        WHERE [x4].[Name] IN (N'userapi') AND ([api4].[Id] = [x4].[ApiResourceId]))
) AS [t4] ON [api.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:47:57.221 +03:00 [DBG] Found ["userapi"] API scopes in database
2019-09-14 11:47:57.226 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Created], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[NonEditable], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument], [identityResource].[Updated]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'userapi')
ORDER BY [identityResource].[Id]
2019-09-14 11:47:57.231 +03:00 [DBG] Found [] identity scopes in database
2019-09-14 11:47:57.234 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api].[Id], [api].[Created], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[LastAccessed], [api].[Name], [api].[NonEditable], [api].[Updated]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'userapi') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id]
2019-09-14 11:47:57.246 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Secrets].[Id], [api.Secrets].[ApiResourceId], [api.Secrets].[Created], [api.Secrets].[Description], [api.Secrets].[Expiration], [api.Secrets].[Type], [api.Secrets].[Value]
FROM [ApiSecrets] AS [api.Secrets]
INNER JOIN (
    SELECT [api0].[Id]
    FROM [ApiResources] AS [api0]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x0]
        WHERE [x0].[Name] IN (N'userapi') AND ([api0].[Id] = [x0].[ApiResourceId]))
) AS [t] ON [api.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:47:57.255 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Scopes].[Id], [api.Scopes].[ApiResourceId], [api.Scopes].[Description], [api.Scopes].[DisplayName], [api.Scopes].[Emphasize], [api.Scopes].[Name], [api.Scopes].[Required], [api.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [api.Scopes]
INNER JOIN (
    SELECT [api1].[Id]
    FROM [ApiResources] AS [api1]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x1]
        WHERE [x1].[Name] IN (N'userapi') AND ([api1].[Id] = [x1].[ApiResourceId]))
) AS [t0] ON [api.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [api.Scopes].[Id]
2019-09-14 11:47:57.264 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Scopes.UserClaims].[Id], [api.Scopes.UserClaims].[ApiScopeId], [api.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [api.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [api.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [api.Scopes0]
    INNER JOIN (
        SELECT [api2].[Id]
        FROM [ApiResources] AS [api2]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x2]
            WHERE [x2].[Name] IN (N'userapi') AND ([api2].[Id] = [x2].[ApiResourceId]))
    ) AS [t1] ON [api.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [api.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:47:57.271 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.UserClaims].[Id], [api.UserClaims].[ApiResourceId], [api.UserClaims].[Type]
FROM [ApiClaims] AS [api.UserClaims]
INNER JOIN (
    SELECT [api3].[Id]
    FROM [ApiResources] AS [api3]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x3]
        WHERE [x3].[Name] IN (N'userapi') AND ([api3].[Id] = [x3].[ApiResourceId]))
) AS [t3] ON [api.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:47:57.279 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [api.Properties].[Id], [api.Properties].[ApiResourceId], [api.Properties].[Key], [api.Properties].[Value]
FROM [ApiProperties] AS [api.Properties]
INNER JOIN (
    SELECT [api4].[Id]
    FROM [ApiResources] AS [api4]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x4]
        WHERE [x4].[Name] IN (N'userapi') AND ([api4].[Id] = [x4].[ApiResourceId]))
) AS [t4] ON [api.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:47:57.286 +03:00 [DBG] Found ["userapi"] API scopes in database
2019-09-14 11:47:57.288 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'AthylpsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2019-09-14 11:47:57.294 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2019-09-14 11:47:57.348 +03:00 [INF] Credentials validated for username: admin
2019-09-14 11:47:57.350 +03:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"admin","Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLPOU0HOKA6R:00000002","TimeStamp":"2019-09-14T08:47:57.0000000Z","ProcessId":16360,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-09-14 11:47:57.381 +03:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLPOU0HOKA6R:00000002","TimeStamp":"2019-09-14T08:47:57.0000000Z","ProcessId":16360,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-09-14 11:47:57.399 +03:00 [DBG] Resource owner password token request validation success.
2019-09-14 11:47:57.408 +03:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":"ResourceOwner Client","GrantType":"password","Scopes":"userapi","AuthorizationCode":null,"RefreshToken":null,"UserName":"admin","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"admin","password":"***REDACTED***","scope":"userapi","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-09-14 11:47:57.462 +03:00 [DBG] Getting claims for access token for client: ro.client
2019-09-14 11:47:57.465 +03:00 [DBG] Getting claims for access token for subject: 1
2019-09-14 11:47:57.525 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0
2019-09-14 11:47:57.567 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0
2019-09-14 11:47:57.666 +03:00 [INF] {"ClientId":"ro.client","ClientName":"ResourceOwner Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"userapi","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****ZGRg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLPOU0HOKA6R:00000002","TimeStamp":"2019-09-14T08:47:57.0000000Z","ProcessId":16360,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-09-14 11:47:57.694 +03:00 [DBG] Token request success.
2019-09-14 11:47:57.699 +03:00 [INF] Request finished in 677.1032ms 200 application/json; charset=UTF-8
2019-09-14 11:48:13.429 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration  
2019-09-14 11:48:13.431 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-14 11:48:13.436 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-14 11:48:13.440 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-14 11:48:13.447 +03:00 [DBG] Start discovery request
2019-09-14 11:48:13.474 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:48:13.493 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[NonEditable], [x].[Required], [x].[ShowInDiscoveryDocument], [x].[Updated]
FROM [IdentityResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:48:13.519 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
FROM [IdentityClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [IdentityResources] AS [x0]
) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:48:13.566 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[LastAccessed], [x].[Name], [x].[NonEditable], [x].[Updated]
FROM [ApiResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:48:13.581 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Created], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
FROM [ApiSecrets] AS [x.Secrets]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [ApiResources] AS [x0]
) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:48:13.594 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [x.Scopes]
INNER JOIN (
    SELECT [x1].[Id]
    FROM [ApiResources] AS [x1]
) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [x.Scopes].[Id]
2019-09-14 11:48:13.608 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [x.Scopes0]
    INNER JOIN (
        SELECT [x2].[Id]
        FROM [ApiResources] AS [x2]
    ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:48:13.618 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
FROM [ApiClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x3].[Id]
    FROM [ApiResources] AS [x3]
) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:48:13.626 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Properties].[Id], [x.Properties].[ApiResourceId], [x.Properties].[Key], [x.Properties].[Value]
FROM [ApiProperties] AS [x.Properties]
INNER JOIN (
    SELECT [x4].[Id]
    FROM [ApiResources] AS [x4]
) AS [t4] ON [x.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:48:13.656 +03:00 [DBG] Found ["openid","profile","userapi"] as all scopes in database
2019-09-14 11:48:13.670 +03:00 [INF] Request finished in 240.8371ms 200 application/json; charset=UTF-8
2019-09-14 11:48:13.781 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration/jwks  
2019-09-14 11:48:13.784 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-14 11:48:13.788 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-14 11:48:13.792 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-14 11:48:13.798 +03:00 [DBG] Start key discovery request
2019-09-14 11:48:13.813 +03:00 [INF] Request finished in 31.4976ms 200 application/jwk-set+json; charset=UTF-8
2019-09-14 11:48:42.358 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration  
2019-09-14 11:48:42.360 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-14 11:48:42.366 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-14 11:48:42.368 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-14 11:48:42.375 +03:00 [DBG] Start discovery request
2019-09-14 11:48:42.378 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:48:42.385 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[NonEditable], [x].[Required], [x].[ShowInDiscoveryDocument], [x].[Updated]
FROM [IdentityResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:48:42.394 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
FROM [IdentityClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [IdentityResources] AS [x0]
) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:48:42.412 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[LastAccessed], [x].[Name], [x].[NonEditable], [x].[Updated]
FROM [ApiResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:48:42.425 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Created], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
FROM [ApiSecrets] AS [x.Secrets]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [ApiResources] AS [x0]
) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:48:42.432 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [x.Scopes]
INNER JOIN (
    SELECT [x1].[Id]
    FROM [ApiResources] AS [x1]
) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [x.Scopes].[Id]
2019-09-14 11:48:42.444 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [x.Scopes0]
    INNER JOIN (
        SELECT [x2].[Id]
        FROM [ApiResources] AS [x2]
    ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:48:42.449 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
FROM [ApiClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x3].[Id]
    FROM [ApiResources] AS [x3]
) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:48:42.458 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Properties].[Id], [x.Properties].[ApiResourceId], [x.Properties].[Key], [x.Properties].[Value]
FROM [ApiProperties] AS [x.Properties]
INNER JOIN (
    SELECT [x4].[Id]
    FROM [ApiResources] AS [x4]
) AS [t4] ON [x.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:48:42.463 +03:00 [DBG] Found ["openid","profile","userapi"] as all scopes in database
2019-09-14 11:48:42.466 +03:00 [INF] Request finished in 107.7224ms 200 application/json; charset=UTF-8
2019-09-14 11:51:11.924 +03:00 [INF] User profile is available. Using 'C:\Users\Kartish\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-09-14 11:51:12.090 +03:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-14 11:51:12.407 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-14 11:51:12.409 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-14 11:51:12.410 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-14 11:51:12.412 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-14 11:51:12.413 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-14 11:51:12.414 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-14 11:51:12.654 +03:00 [DBG] Starting grant removal
2019-09-14 11:51:57.960 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration  
2019-09-14 11:51:58.003 +03:00 [DBG] Login Url: /Account/Login
2019-09-14 11:51:58.005 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-14 11:51:58.006 +03:00 [DBG] Logout Url: /Account/Logout
2019-09-14 11:51:58.007 +03:00 [DBG] ConsentUrl Url: /consent
2019-09-14 11:51:58.008 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-14 11:51:58.010 +03:00 [DBG] Error Url: /home/error
2019-09-14 11:51:58.011 +03:00 [DBG] Error Id Parameter: errorId
2019-09-14 11:51:58.058 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-14 11:51:58.078 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-14 11:51:58.081 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-14 11:51:58.088 +03:00 [DBG] Start discovery request
2019-09-14 11:51:58.839 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:51:59.270 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[NonEditable], [x].[Required], [x].[ShowInDiscoveryDocument], [x].[Updated]
FROM [IdentityResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:51:59.383 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
FROM [IdentityClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [IdentityResources] AS [x0]
) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:51:59.481 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[LastAccessed], [x].[Name], [x].[NonEditable], [x].[Updated]
FROM [ApiResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:51:59.503 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Created], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
FROM [ApiSecrets] AS [x.Secrets]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [ApiResources] AS [x0]
) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:51:59.512 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [x.Scopes]
INNER JOIN (
    SELECT [x1].[Id]
    FROM [ApiResources] AS [x1]
) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [x.Scopes].[Id]
2019-09-14 11:51:59.531 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [x.Scopes0]
    INNER JOIN (
        SELECT [x2].[Id]
        FROM [ApiResources] AS [x2]
    ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:51:59.541 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
FROM [ApiClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x3].[Id]
    FROM [ApiResources] AS [x3]
) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:51:59.549 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Properties].[Id], [x.Properties].[ApiResourceId], [x.Properties].[Key], [x.Properties].[Value]
FROM [ApiProperties] AS [x.Properties]
INNER JOIN (
    SELECT [x4].[Id]
    FROM [ApiResources] AS [x4]
) AS [t4] ON [x.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:51:59.924 +03:00 [DBG] Found ["openid","profile","userapi"] as all scopes in database
2019-09-14 11:51:59.982 +03:00 [INF] Request finished in 2023.957ms 200 application/json; charset=UTF-8
2019-09-14 11:52:00.091 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration/jwks  
2019-09-14 11:52:00.094 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-14 11:52:00.107 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-14 11:52:00.114 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-14 11:52:00.126 +03:00 [DBG] Start key discovery request
2019-09-14 11:52:00.156 +03:00 [INF] Request finished in 65.2391ms 200 application/jwk-set+json; charset=UTF-8
2019-09-14 11:53:52.012 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration  
2019-09-14 11:53:52.014 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-14 11:53:52.023 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-14 11:53:52.024 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-14 11:53:52.027 +03:00 [DBG] Start discovery request
2019-09-14 11:53:52.054 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:53:52.076 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[NonEditable], [x].[Required], [x].[ShowInDiscoveryDocument], [x].[Updated]
FROM [IdentityResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:53:52.089 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
FROM [IdentityClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [IdentityResources] AS [x0]
) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:53:52.095 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[LastAccessed], [x].[Name], [x].[NonEditable], [x].[Updated]
FROM [ApiResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:53:52.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Created], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
FROM [ApiSecrets] AS [x.Secrets]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [ApiResources] AS [x0]
) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:53:52.121 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [x.Scopes]
INNER JOIN (
    SELECT [x1].[Id]
    FROM [ApiResources] AS [x1]
) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [x.Scopes].[Id]
2019-09-14 11:53:52.126 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [x.Scopes0]
    INNER JOIN (
        SELECT [x2].[Id]
        FROM [ApiResources] AS [x2]
    ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:53:52.133 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
FROM [ApiClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x3].[Id]
    FROM [ApiResources] AS [x3]
) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:53:52.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Properties].[Id], [x.Properties].[ApiResourceId], [x.Properties].[Key], [x.Properties].[Value]
FROM [ApiProperties] AS [x.Properties]
INNER JOIN (
    SELECT [x4].[Id]
    FROM [ApiResources] AS [x4]
) AS [t4] ON [x.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:53:52.144 +03:00 [DBG] Found ["openid","profile","userapi"] as all scopes in database
2019-09-14 11:53:52.147 +03:00 [INF] Request finished in 135.2818ms 200 application/json; charset=UTF-8
2019-09-14 11:53:52.258 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration/jwks  
2019-09-14 11:53:52.261 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-14 11:53:52.263 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-14 11:53:52.265 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-14 11:53:52.275 +03:00 [DBG] Start key discovery request
2019-09-14 11:53:52.288 +03:00 [INF] Request finished in 29.7323ms 200 application/jwk-set+json; charset=UTF-8
2019-09-14 11:55:30.269 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration  
2019-09-14 11:55:30.270 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-14 11:55:30.275 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-14 11:55:30.278 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-14 11:55:30.282 +03:00 [DBG] Start discovery request
2019-09-14 11:55:30.284 +03:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Athylps.IdentityServer 
2019-09-14 11:55:30.291 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[NonEditable], [x].[Required], [x].[ShowInDiscoveryDocument], [x].[Updated]
FROM [IdentityResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:55:30.296 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
FROM [IdentityClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [IdentityResources] AS [x0]
) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:55:30.304 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Id], [x].[Created], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[LastAccessed], [x].[Name], [x].[NonEditable], [x].[Updated]
FROM [ApiResources] AS [x]
ORDER BY [x].[Id]
2019-09-14 11:55:30.311 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Created], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
FROM [ApiSecrets] AS [x.Secrets]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [ApiResources] AS [x0]
) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id]
2019-09-14 11:55:30.320 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [x.Scopes]
INNER JOIN (
    SELECT [x1].[Id]
    FROM [ApiResources] AS [x1]
) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [x.Scopes].[Id]
2019-09-14 11:55:30.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [x.Scopes0]
    INNER JOIN (
        SELECT [x2].[Id]
        FROM [ApiResources] AS [x2]
    ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id]
2019-09-14 11:55:30.336 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
FROM [ApiClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x3].[Id]
    FROM [ApiResources] AS [x3]
) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id]
2019-09-14 11:55:30.343 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [x.Properties].[Id], [x.Properties].[ApiResourceId], [x.Properties].[Key], [x.Properties].[Value]
FROM [ApiProperties] AS [x.Properties]
INNER JOIN (
    SELECT [x4].[Id]
    FROM [ApiResources] AS [x4]
) AS [t4] ON [x.Properties].[ApiResourceId] = [t4].[Id]
ORDER BY [t4].[Id]
2019-09-14 11:55:30.347 +03:00 [DBG] Found ["openid","profile","userapi"] as all scopes in database
2019-09-14 11:55:30.350 +03:00 [INF] Request finished in 80.8064ms 200 application/json; charset=UTF-8
2019-09-14 11:55:30.460 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/.well-known/openid-configuration/jwks  
2019-09-14 11:55:30.462 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-14 11:55:30.464 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-14 11:55:30.466 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-14 11:55:30.468 +03:00 [DBG] Start key discovery request
2019-09-14 11:55:30.471 +03:00 [INF] Request finished in 10.3642ms 200 application/jwk-set+json; charset=UTF-8
